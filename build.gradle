/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */

buildscript {
	ext {
		springBootVersion = '2.3.1.RELEASE'
		dependencyCheckVersion = '5.3.2'

	}
	repositories {
		maven {
        	url '~/.m2/repository'
   		 }
	}
	dependencies {
		classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
		classpath("org.owasp:dependency-check-gradle:${dependencyCheckVersion}")
	}
}

plugins {
    id "com.gorylenko.gradle-git-properties" version "2.0.0"
    id 'com.github.spotbugs' version '4.4.3'
}


if (!hasProperty('ltgRealizeNexusUsername')) {
    ext.ltgRealizeNexusUsername = 'deployment'
}


repositories {
    mavenLocal()
}

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: 'org.springframework.boot'
apply plugin: 'io.spring.dependency-management'
apply plugin: 'war'
apply plugin: 'maven-publish'
apply plugin: 'application'
apply plugin: 'org.owasp.dependencycheck'

mainClassName = 'com.savvas.ltg.rbs.template.Application'



group = 'com.pearson.ltg'
version = "${project_version}"
sourceCompatibility = "${java_version}"

apply from: file('gradle/check/checkstyle.gradle')
apply from: file('gradle/check/spotbugs.gradle')
apply from: file('gradle/dependencies.gradle')


repositories {
	mavenCentral()
	 maven {
        url "${ltgRealizeNexusURL}/nexus/content/repositories/${project.version.endsWith('SNAPSHOT') ? 'snapshots' : 'releases' }"
        credentials {
            username ltgRealizeNexusUsername
            password ltgRealizeNexusPassword
        }
    }
}

dependencyCheck {
    suppressionFile='config/dependency-check/suppressionFile.xml'
    skipConfigurations=['checkstyle', 'spotbugs']
    failBuildOnCVSS=7
}
//check.dependsOn dependencyCheckAnalyze
